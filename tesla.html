<script>
    const bookmarks = [
        { name: "YouTube", url: "https://www.youtube.com" },
        { name: "REVE PdR España", url: "https://www.mapareve.es/mapa-puntos-recarga" },
        { name: "GDrive", url: "https://drive.google.com", favicon: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v14z'/><rect x='2' y='5' width='20' height='14' rx='2' ry='2'/></svg>" },
        { name: "Batería", url: "https://docs.google.com/spreadsheets/d/1bLZmgVGTBqg2bS2E45JpORjs9eK2nb05AWXYLLDY-RI/edit?gid=1398548891#gid=1398548891", favicon: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'/><polyline points='12 6 12 12 16 14'/></svg>" },
        { name: "Twitter", url: "https://x.com" },
        { name: "Filmin", url: "https://www.filmin.es/catalogo/peliculas" },
        { name: "ABRP", url: "https://abetterrouteplanner.com" },
        { name: "ElectroMaps", url: "https://map.electromaps.com/es/" },
        { name: "PdR,s", url: "https://www.google.com/maps/search/puntos+recarga+veh%C3%ADculos+el%C3%A9ctricos", favicon: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 18h8v2h-8v-2z'/><path d='M12 14h8v2h-8v-2z'/><path d='M12 10h8v2h-8v-2z'/><path d='M12 6h8v2h-8V6z'/><path d='M4 18h4v-2H4v2zM4 14h4v-2H4v2zM4 10h4v-2H4v2zM4 6h4V4H4v2z'/></svg>" },
        { name: "Google Maps", url: "https://maps.google.com" },
        { name: "Google", url: "https://www.google.com" },
        { name: "TIEMPO", url: "https://www.google.com/search?q=weather", favicon: "https://www.google.com/s2/favicons?domain=accuweather.com&sz=64" },
        { name: "TESSIE", url: "https://dash.tessie.com/signin" },
        { name: "Mis Updates", url: "https://dash.tessie.com/software" },
        { name: "NotaTeslaApp", url: "https://www.notateslaapp.com/software-updates/" },
        { name: "Olas Updates", url: "https://es.stats.tessie.com/" },
        { name: "ENHAUTO", url: "https://www.enhauto.com" },
        { name: "MAREAS", url: "https://www.meteogalicia.gal/web/predicion/mareas-e-luas" },
        { name: "ELECTROVERSE", url: "https://electroverse.com/es/map", favicon: "https://www.google.com/s2/favicons?domain=electroverse.com&sz=64" },
        { name: "ACCIONA", url: "https://www.google.com/maps/search/recarga+Acciona", favicon: "https://www.google.com/s2/favicons?domain=acciona.com&sz=64" },
        { name: "IBERDROLA", url: "https://www.google.com/maps/search/recarga+IBERDROLA", favicon: "https://www.google.com/s2/favicons?domain=iberdrola.com&sz=64" },
        { name: "WAYLET Repsol", url: "https://www.google.com/maps/search/recarga+REPSOL+Waylet", favicon: "https://www.google.com/s2/favicons?domain=repsol.com&sz=64" },
        { name: "ENDESA xWay", url: "https://www.google.com/maps/search/recarga+ENDESA+XWAY", favicon: "https://www.google.com/s2/favicons?domain=endesa.com&sz=64" },
        { name: "ZUNDER", url: "https://www.google.com/maps/search/recarga+ZUNDER", favicon: "https://www.google.com/s2/favicons?domain=zunder.com&sz=64" },
        { name: "IONITY", url: "https://www.google.com/maps/search/recarga+IONITY", favicon: "https://www.google.com/s2/favicons?domain=ionity.eu&sz=64" },
        { name: "WENEA", url: "https://www.google.com/maps/search/recarga+WENEA", favicon: "https://www.google.com/s2/favicons?domain=wenea.com&sz=64" },
        { name: "T.ENERGIES", url: "https://www.google.com/maps/search/recarga+TOTAL+ENERGIES", favicon: "https://www.google.com/s2/favicons?domain=totalenergies.com&sz=64" },
        { name: "GALP", url: "https://www.google.com/maps/search/recarga+GALP", favicon: "https://www.google.com/s2/favicons?domain=galp.com&sz=64" },
        { name: "MIIO", url: "https://miio.com", favicon: "https://www.google.com/s2/favicons?domain=miio.com&sz=64" },
        { name: "EVDC", url: "https://evdc.network", favicon: "https://www.google.com/s2/favicons?domain=evdc.network&sz=64" },
        { name: "GROK", url: "https://grok.com/?referrer=website" },
        { name: "CHATGPT", url: "https://chat.openai.com" },
        { name: "CLAUDE", url: "https://claude.ai/new" },
        { name: "GEMINI", url: "https://gemini.google.com" },
        { name: "NOTEBOOKLM", url: "https://notebooklm.google.com" },
        null,
        { name: "TeslaParaTodos", url: "https://teslaparatodos.com/cine/" },
        { name: "BetterTheater", url: "https://abettertheater.com" },
        { name: "BIP&DRIVE", url: "https://areaprivada.bipdrive.com/login" },
        { name: "Octopus", url: "https://octopus.energy/dashboard" },
        { name: "App MCE", url: "https://www.oscarabilleira.com/app-mi-coche-electrico/#ayuda" },
        { name: "Patrón Luz", url: "https://docs.google.com/spreadsheets/d/1R7UUZ9i4BAYWAGAX6PQT1WGd12GEZ4Ja/edit?usp=sharing&ouid=108345701896498198132&rtpof=true&sd=true" },
        { name: "TradingView", url: "https://es.tradingview.com/chart/t5g9UFG0/" },
        { name: "Inicio Tesla", url: "#" },
        { name: "Maesal Detailer", url: "https://www.maesaldetailer.es/" },
        null,
        { name: "Superchargers", url: "https://www.tesla.com/es_es/findus?bounds=45.41107111786193%2C19.27853056943938%2C29.703668286784747%2C-16.64676239931062" },
        { name: "TESLA web", url: "https://www.tesla.com/es_es" },
        { name: "Manual M3", url: "https://www.tesla.com/ownersmanual/model3/es_es/" },
        { name: "de Servicio", url: "https://service.tesla.com/docs/Model3/ServiceManual/2024/es-es/" },
        { name: "de Despiece", url: "https://epc.tesla.com/es-MX/catalogs/e0e07c3d-272f-4d06-b8b6-9e92f857e5f3" },
        { name: "de Usted Mismo", url: "https://www.tesla.com/es_es/support/do-it-yourself-guides" },
        { name: "de Filtro Cabina", url: "https://service.tesla.com/docs/Public/diy/model3/es_es/GUID-DB0A1E3C-926E-498C-A2FD-A27B8421A471.html" },
        { name: "de Móvil remoto", url: "https://service.tesla.com/docs/Public/diy/model3/es_es/GUID-53651B16-A2E3-4118-933E-B5F41C74D433.html" },
        null, null, null, null, null,
        null,
        { name: "JOdena", url: "https://www.youtube.com/@JOdena", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "earcos", url: "https://www.youtube.com/@earcos", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "AutoIngenium", url: "https://www.youtube.com/@AutoIngenium", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "ungallegoenmunich", url: "https://www.youtube.com/@ungallegoenmunich", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "electromiaumiau", url: "https://www.youtube.com/@electromiaumiau", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "Manuel_Martos", url: "https://www.youtube.com/@Manuel_Martos", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "TodosElectricos", url: "https://www.youtube.com/@TodosElectricos", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "JuanVidalHaces", url: "https://www.youtube.com/@JuanVidalHaces", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "ruedana", url: "https://www.youtube.com/@ruedana", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "STR-600", url: "https://www.youtube.com/@STR-600", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "juanjoteslaventuras", url: "https://www.youtube.com/@juanjoteslaventuras", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "CarlosCuezva", url: "https://www.youtube.com/@CarlosCuezva", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "javimanzanoo", url: "https://www.youtube.com/@javimanzanoo", favicon: "https://www.youtube.com/favicon.ico" },
        null, null, null, null,
        null,
        { name: "la_inteligencia_artificial", url: "https://www.youtube.com/@la_inteligencia_artificial", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "jfcalero", url: "https://www.youtube.com/@jfcalero", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "VisualPolitik", url: "https://www.youtube.com/@VisualPolitik", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "fabiancbarrio", url: "https://www.youtube.com/@fabiancbarrio", favicon: "https://www.youtube.com/favicon.ico" },
        { name: "Loquetudigas", url: "https://www.youtube.com/@Loquetudigas", favicon: "https://www.youtube.com/favicon.ico" },
        null,
        { name: "TheWildProject", url: "https://www.youtube.com/@TheWildProject", favicon: "https://www.youtube.com/favicon.ico" },
        null, null, null, null
    ];
    const TOTAL_CELLS = 96;
    const grid = document.getElementById('bookmark-grid');

    const getFaviconUrl = (bookmark) => {
        try {
            if (bookmark.favicon) {
                return bookmark.favicon;
            }
            const domain = new URL(bookmark.url).hostname;
            return `https://www.google.com/s2/favicons?domain=${domain}&sz=64`;
        } catch (e) {
            return '';
        }
    };

    Array.from({ length: TOTAL_CELLS }).forEach((_, index) => {
        const cell = document.createElement('div');
        if (index < bookmarks.length && bookmarks[index] !== null) {
            const bookmark = bookmarks[index];
            const link = document.createElement('a');
            link.className = index < 48 
                ? 'bookmark-item flex flex-col justify-center items-center min-w-[145px] min-h-[83px] rounded-lg'
                : 'bookmark-item small-bookmark flex flex-col justify-center items-center min-w-[145px] min-h-[48px] rounded-lg';
            link.title = bookmark.name;
            link.target = "_blank";
            link.rel = "noopener noreferrer";

            const img = document.createElement('img');
            img.src = getFaviconUrl(bookmark);
            img.alt = `Favicon de ${bookmark.name}`;
            img.className = index < 48 ? 'w-9 h-9 rounded' : 'w-5 h-5 rounded';
            img.loading = "lazy";
            img.onerror = () => (img.style.display = 'none');

            const name = document.createElement('span');
            name.className = 'bookmark-name';
            name.textContent = bookmark.name;

            if (bookmark.name === "Inicio Tesla") {
                link.href = "#";
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    window.history.back();
                });
            } else {
                link.href = bookmark.url;
            }

            link.appendChild(img);
            link.appendChild(name);
            cell.appendChild(link);
        } else {
            cell.className = index < 48 
                ? 'min-w-[145px] min-h-[83px] bg-gray-50 border border-dashed border-gray-200 rounded-lg'
                : 'min-w-[145px] min-h-[48px] bg-gray-50 border border-dashed border-gray-200 rounded-lg';
        }
        grid.appendChild(cell);
    });

    const scrollToggle = document.getElementById('scroll-toggle');
    scrollToggle.addEventListener('click', () => {
        const scrollPosition = window.scrollY;
        const maxScroll = document.body.scrollHeight - window.innerHeight;
        if (scrollPosition < 100) {
            window.scrollTo({ top: maxScroll, behavior: 'smooth' });
        } else {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    });

    const backButton = document.getElementById('back-button');
    const forwardButton = document.getElementById('forward-button');
    backButton.addEventListener('click', () => {
        window.history.back();
    });
    forwardButton.addEventListener('click', () => {
        window.history.forward();
    });
</script>
