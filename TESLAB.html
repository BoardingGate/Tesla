<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoardingGate Lanzador</title>
    <link rel="icon" href="https://boardinggate.github.io/Tesla/IMG_4157.jpeg" type="image/jpeg">
    <script src="https://cdn.tailwindcss.com"></script>

<style>
    .bookmark-item {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 4px 4px 8px rgba(0, 0, 0, 0.5), -4px -4px 8px rgba(255, 255, 255, 0.1);
        position: relative;
    }
    .bookmark-item:hover {
        transform: scale(1.1) translateY(-2px);
        box-shadow: 6px 6px 12px rgba(0, 0, 0, 0.6), -6px -6px 12px rgba(255, 255, 255, 0.15);
    }
    .bookmark-item img {
        image-rendering: crisp-edges;
    }
    .bookmark-name {
        font-weight: bold;
        color: #333;
        text-align: center;
        margin-top: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }
    #bookmark-grid {
        display: grid;
        grid-template-columns: repeat(6, minmax(120px, 1fr));
        gap: 15px;
        background-color: transparent;
        border-radius: 0.75rem;
        position: relative;
        width: 100%;
        max-width: 984px;
        margin: 0 auto 0 60px;
        transition: all 0.3s ease;
    }
    #bookmark-grid > div {
        height: auto;
        aspect-ratio: 16 / 9;
        transition: all 0.3s ease;
    }
    .bookmark-item {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
        background-color: hsla(var(--hue), var(--saturation), var(--lightness), 0.64);
    }
    .bookmark-item img {
        width: 36px;
        height: auto;
        max-width: 40px;
        border-radius: 0.25rem;
    }
    .bookmark-name {
        font-size: clamp(0.85rem, 1.5vw, 1.15rem);
    }
    .small-bookmark img {
        width: 24px;
        max-width: 28px;
    }
    .small-bookmark .bookmark-name {
        font-size: clamp(0.85rem, 1.5vw, 1.15rem);
    }
    @media (max-width: 768px) {
        #bookmark-grid {
            grid-template-columns: repeat(3, minmax(100px, 1fr));
            gap: 10px;
        }
    }
    @media (max-width: 480px) {
        #bookmark-grid {
            grid-template-columns: repeat(2, minmax(80px, 1fr));
            gap: 8px;
        }
    }
    .header-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        background-color: #ABAB99;
        padding: 0.5rem;
    }
    body.dark-mode .header-container {
        background-color: #92927E;
    }
    .header-logo {
        width: 100px;
        height: 70px;
        transition: filter 0.2s ease;
    }
    body.dark-mode .header-logo {
        filter: brightness(85%);
    }
    .title-container {
        background-color: #ABAB99;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        display: inline-block;
    }
    body.dark-mode .title-container {
        background-color: #92927E;
    }
    .header-container h1 {
        color: #5C5C47;
    }
    .version-text {
        font-size: 0.75rem;
        color: #5C5C47;
        font-weight: normal;
    }
    body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background-color: #ABAB99;
        margin: 0;
        overflow-x: hidden;
    }
    body.dark-mode {
        background-color: #92927E;
    }
    header {
        margin-bottom: 0.5rem;
    }
    main {
        margin: 0.5rem auto 0.5rem 60px;
        background-color: transparent;
        border-radius: 0.75rem;
        padding: 16px;
        min-height: 400px;
        transition: background-color 0.3s ease;
        max-width: 984px;
        width: 100%;
    }
    footer {
        margin: 0.5rem auto;
        text-align: center;
        max-width: 984px;
        width: 100%;
        display: block;
        background-color: #ABAB99;
        margin-left: 60px;
    }
    body.dark-mode footer {
        background-color: #92927E;
    }
    .footer-content {
        color: #5C5C47;
        padding: 0.5rem;
        margin: 0 auto;
        max-width: 100%;
        position: relative;
    }
    .footer-subtext {
        font-size: 0.75rem;
        color: #5C5C47;
        margin-top: 0.25rem;
        text-align: center;
    }
    .footer-link-green {
        color: #5C5C47;
        text-decoration: none;
        transition: color 0.2s ease;
    }
    .footer-link-green:hover {
        color: #5C5C47;
    }
    .footer-line {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 0.5rem;
        flex-wrap: wrap;
    }
    .scroll-toggle-button {
        position: fixed;
        width: 91px;
        height: clamp(78.2px, 19.55vw, 175.95px);
        background-color: #668B8B;
        border-radius: 60px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: space-between;
        padding: clamp(10px, 2vw, 20px);
        cursor: pointer;
        box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        z-index: 1000;
        transition: background-color 0.2s ease;
        left: 10px;
        top: 10px;
    }
    .scroll-toggle-button:hover {
        background-color: #D9A066;
    }
    .scroll-toggle-button svg {
        width: clamp(24px, 4vw, 32px);
        height: clamp(24px, 4vw, 32px);
        stroke: #E6E6DC;
    }
    .top-text-container {
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: clamp(0.6rem, 1.5vw, 0.75rem);
        color: #5C5C47;
        background-color: #D1D5DB;
        margin-top: 0.25rem;
        margin-left: 60px;
        gap: 0.5rem;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        animation: fadeOut 6s forwards;
    }
    body.dark-mode .top-text-container {
        background-color: #6B7280;
    }
    .top-text-container span {
        color: #DButtonStyles();
            saveSettings();
        });

        function adjustButtonPositions() {
            if (isMinimalMode) return;

            const buttonHeight = 54;
            const scrollToggleHeight = clamp(78.2, window.innerWidth * 0.1955, 175.95);
            const gap = 10;
            let currentTop = 10;

            scrollToggle.style.top = `${currentTop}px`;
            currentTop += scrollToggleHeight + gap;

            if (isActive && isFooterVisible) {
                const orderedButtons = [
                    onOffToggle,
                    ...toggleButtons,
                    weatherButton,
                    reminderButton,
                    zoomButton,
                    darkModeToggle,
                    reloadButton,
                    homeButton,
                    configButton
                ];

                orderedButtons.forEach(button => {
                    button.style.top = `${currentTop}px`;
                    currentTop += buttonHeight + gap;
                });
            } else {
                onOffToggle.style.top = `${currentTop}px`;
            }
        }

        function toggleFooterVisibility() {
            const footer = document.querySelector('footer');
            if (isFooterVisible) {
                footer.classList.remove('footer-hidden');
            } else {
                footer.classList.add('footer-hidden');
            }
            adjustButtonPositions();
        }

        window.addEventListener('resize', adjustButtonPositions);

        function updateNotice() {
            if (!isActive || notices.length === 0) {
                document.getElementById('current-notice').textContent = '';
                return;
            }
            document.getElementById('current-notice').textContent = notices[currentNoticeIndex];
            currentNoticeIndex = (currentNoticeIndex + 1) % notices.length;
            setTimeout(updateNotice, 14000);
        }

        document.getElementById('notice-toggle-icon').addEventListener('click', () => {
            if (isMinimalMode) return;
            isActive = !isActive;
            const noticesContainer = document.querySelector('.notices-container');
            noticesContainer.style.display = isActive ? 'flex' : 'none';
            if (isActive) {
                updateNotice();
            } else {
                document.getElementById('current-notice').textContent = '';
            }
            saveSettings();
            adjustButtonPositions();
        });

        document.querySelector('.notices-container').style.display = isActive ? 'flex' : 'none';

        function showReminderModal(reminder = { title: '', description: '', date: '', time: '' }, index = -1) {
            const modal = document.createElement('div');
            modal.className = 'reminder-modal';
            modal.setAttribute('aria-label', 'Añadir o modificar recordatorio');
            const dateValue = reminder.date || new Date().toISOString().split('T')[0];
            const timeValue = reminder.time || new Date().toTimeString().slice(0, 5);
            modal.innerHTML = `
                <h2>${index === -1 ? 'Añadir' : 'Modificar'} Recordatorio</h2>
                <form id="reminder-form">
                    <label for="reminder-title">Título:</label>
                    <input type="text" id="reminder-title" value="${reminder.title}" required>
                    <label for="reminder-description">Descripción:</label>
                    <textarea id="reminder-description">${reminder.description}</textarea>
                    <label for="reminder-date">Fecha:</label>
                    <input type="date" id="reminder-date" value="${dateValue}" required>
                    <label for="reminder-time">Hora:</label>
                    <input type="time" id="reminder-time" value="${timeValue}" required>
                    <div class="button-group">
                        <button type="submit">${index === -1 ? 'Añadir' : 'Modificar'}</button>
                        <button type="button" id="cancel-reminder">Cancelar</button>
                    </div>
                </form>
            `;
            document.body.appendChild(modal);

            modal.querySelector('#reminder-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const title = modal.querySelector('#reminder-title').value;
                const description = modal.querySelector('#reminder-description').value;
                const date = modal.querySelector('#reminder-date').value;
                const time = modal.querySelector('#reminder-time').value;

                const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
                const newReminder = { title, description, date, time };

                if (index === -1) {
                    reminders.push(newReminder);
                } else {
                    reminders[index] = newReminder;
                }

                localStorage.setItem('reminders', JSON.stringify(reminders));
                document.body.removeChild(modal);
                updateButtonStyles();
                checkReminders();
            });

            modal.querySelector('#cancel-reminder').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }

        function showReminderNotification(reminder, index) {
            const notification = document.createElement('div');
            notification.className = 'reminder-notification';
            notification.innerHTML = `
                <p>${reminder.title}</p>
                <p>${reminder.description}</p>
                <p>${reminder.date} ${reminder.time}</p>
                <div class="button-group">
                    <button class="cancel">Cancelar</button>
                    <button class="modify">Modificar</button>
                    <button class="postpone">Aplazar</button>
                </div>
            `;
            document.getElementById('reminder-notifications').appendChild(notification);

            notification.querySelector('.cancel').addEventListener('click', () => {
                const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
                reminders.splice(index, 1);
                localStorage.setItem('reminders', JSON.stringify(reminders));
                notification.remove();
                updateButtonStyles();
            });

            notification.querySelector('.modify').addEventListener('click', () => {
                notification.remove();
                showReminderModal(reminder, index);
            });

            notification.querySelector('.postpone').addEventListener('click', () => {
                const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
                const date = new Date(`${reminder.date}T${reminder.time}`);
                date.setMinutes(date.getMinutes() + 30);
                reminders[index] = {
                    ...reminder,
                    date: date.toISOString().split('T')[0],
                    time: date.toTimeString().slice(0, 5)
                };
                localStorage.setItem('reminders', JSON.stringify(reminders));
                notification.remove();
                updateButtonStyles();
            });

            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 30000);
        }

        function checkReminders() {
            const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
            const now = new Date();

            reminders.forEach((reminder, index) => {
                const reminderDateTime = new Date(`${reminder.date}T${reminder.time}`);
                if (reminderDateTime <= now) {
                    showReminderNotification(reminder, index);
                }
            });

            setTimeout(checkReminders, 60000);
        }

        function showAllReminders() {
            const reminders = JSON.parse(localStorage.getItem('reminders') || '[]');
            const modal = document.createElement('div');
            modal.className = 'reminder-modal';
            modal.setAttribute('aria-label', 'Lista de recordatorios');
            modal.innerHTML = `
                <h2>Recordatorios</h2>
                <div id="reminders-list">
                    ${reminders.length === 0 ? '<p>No hay recordatorios.</p>' : ''}
                </div>
                <div class="button-group">
                    <button type="button" id="close-reminders">Cerrar</button>
                </div>
            `;
            document.body.appendChild(modal);

            const list = modal.querySelector('#reminders-list');
            reminders.forEach((reminder, index) => {
                const item = document.createElement('div');
                item.className = 'reminder-item';
                item.style.marginBottom = '1rem';
                item.innerHTML = `
                    <p><strong>${reminder.title}</strong></p>
                    <p>${reminder.description}</p>
                    <p>${reminder.date} ${reminder.time}</p>
                    <div class="button-group">
                        <button class="modify">Modificar</button>
                        <button class="delete">Eliminar</button>
                    </div>
                `;
                list.appendChild(item);

                item.querySelector('.modify').addEventListener('click', () => {
                    document.body.removeChild(modal);
                    showReminderModal(reminder, index);
                });

                item.querySelector('.delete').addEventListener('click', () => {
                    if (confirm(`¿Eliminar el recordatorio "${reminder.title}"?`)) {
                        reminders.splice(index, 1);
                        localStorage.setItem('reminders', JSON.stringify(reminders));
                        item.remove();
                        updateButtonStyles();
                        if (list.children.length === 0) {
                            list.innerHTML = '<p>No hay recordatorios.</p>';
                        }
                    }
                });
            });

            modal.querySelector('#close-reminders').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
        }

        loadNotices();
        loadSavedSettings();
        updateVersion();
        checkReminders();
        adjustButtonPositions();

        document.getElementById('back-button').addEventListener('click', () => {
            if (isMinimalMode) return;
            window.history.back();
        });

        document.getElementById('forward-button').addEventListener('click', () => {
            if (isMinimalMode) return;
            window.history.forward();
        });

    </script>
</body>
</html>