<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Usuario - BoardingGate Lanzador</title>
    <link rel="icon" href="https://boardinggate.github.io/Tesla/th.jpeg" type="image/jpeg">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #f0f0e0;
            --bg-sidebar: #333;
            --text-light: #f5f5f5;
            --text-dark: #333;
            --header-color: #2F4F4F;
            --accent-color: #4682B4;
            --highlight-color: #ffc107;
            --border-color: #ccc;
            --app-bg: #ABAB99;
            --app-widget-bg: #C5C8B8;
            --app-modal-bg: #DAC8A0;
        }

        body {
            font-family: 'Lato', sans-serif;
            margin: 0;
            background-color: var(--bg-main);
            color: var(--text-dark);
            line-height: 1.6;
            display: flex;
        }

        .manual-container {
            display: flex;
            width: 100%;
        }

        .index-nav {
            width: 280px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            background-color: var(--bg-sidebar);
            color: var(--text-light);
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .index-nav h2 {
            margin-top: 0;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .index-nav h2 img {
             width: 32px;
             height: 32px;
        }

        .index-nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .index-nav li a {
            display: block;
            padding: 8px 15px;
            color: var(--text-light);
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.2s, color 0.2s;
            font-size: 0.95rem;
        }
        .index-nav li a:hover {
            background-color: var(--accent-color);
        }
        .index-nav ul ul {
            padding-left: 20px;
            margin-top: 5px;
        }
         .index-nav ul ul li a {
            font-size: 0.85rem;
            padding: 5px 10px;
         }

        /* --- ESTILO AÑADIDO PARA EL BOTÓN EN EL NAV --- */
        .nav-exit-btn {
            display: block;
            background-color: var(--accent-color);
            color: var(--text-light);
            text-decoration: none;
            text-align: center;
            padding: 10px 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .nav-exit-btn:hover {
            background-color: #5a9bd4;
        }
        /* --- FIN DE ESTILO AÑADIDO --- */

        .manual-content {
            margin-left: 280px;
            padding: 30px 40px 30px 60px; /* MODIFICADO: Añadido más padding a la izquierda */
            width: calc(100% - 280px);
        }

        section {
            margin-bottom: 60px;
            padding-top: 20px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 30px;
        }
        section:last-child {
            border-bottom: none;
        }

        h1, h2, h3, h4 {
            color: var(--header-color);
        }
        
        /* MODIFICADO: Estilo de la cabecera principal */
        h1 {
            font-size: 2rem;
            margin-bottom: 25px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            background-color: #e9ecef;
            color: #005A9C;
            border-radius: 8px;
            border-bottom: none;
        }
        h1 img {
            width: 60px;
            height: auto;
            border-radius: 8px;
        }

        h2 {
            font-size: 1.8rem;
            margin-top: 0;
            color: blue;
            background-color: white;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        h3 {
            font-size: 1.4rem;
            color: var(--accent-color);
            margin-top: 25px;
        }

        h4 {
             font-size: 1.1rem;
             color: #555;
             margin-top: 20px;
        }

        p, li {
            font-size: 1.05rem;
        }

        code {
            background-color: #e0e0e0;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.95em;
        }

        .icon-inline {
            width: 24px;
            height: 24px;
            vertical-align: middle;
            display: inline-block;
            margin: 0 4px;
            border-radius: 50%;
        }
        .icon-inline.rect {
             border-radius: 4px;
        }
        
        .screenshot-container {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .screenshot-container h4 {
            margin-top: 0;
            font-size: 1.1rem;
            color: #333;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        /* Recreación de elementos de la UI */
        .ui-app-bg {
            background-color: var(--app-bg);
            padding: 20px;
            border-radius: 8px;
            position: relative;
        }

        .ui-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 1rem;
        }
        .ui-header img {
            width: 100px;
            height: 70px;
        }
        .ui-header .ui-title {
            background-color: var(--app-bg);
            color: #5C5C47;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: bold;
        }

        .ui-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(120px, 1fr));
            gap: 15px;
            padding: 15px;
        }
        .ui-bookmark {
            width: 100%;
            aspect-ratio: 16 / 9;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 0.5rem;
            background-color: var(--app-widget-bg);
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            text-align: center;
            padding: 5px;
            border: 1px solid #aaa;
        }
        .ui-bookmark img {
            width: 36px;
            height: 36px;
            border-radius: 4px;
        }
        .ui-bookmark-name {
            font-size: 0.8rem;
            font-weight: bold;
            color: #333;
            margin-top: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }
        .ui-top-bar, .ui-side-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }
        .ui-button {
             background-color: transparent;
             border: none;
             padding: 5px;
             border-radius: 50%;
             cursor: default;
        }
         .ui-button img {
             width: 46px;
             height: 46px;
             object-fit: contain;
         }
        .ui-side-button {
             width: 135px;
             height: 74px;
             border-radius: 35px;
             display: flex;
             align-items: center;
             justify-content: center;
             background-color: var(--app-bg);
             border: 1px solid #7c7c68;
             box-shadow: 2px 2px 6px rgba(0,0,0,0.4);
        }
        .ui-side-button img {
             max-width: 60%;
             max-height: 60%;
             object-fit: contain;
        }
        
        .ui-modal {
            background-color: var(--app-modal-bg);
            padding: 1.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.15);
            margin-top: 20px;
            border: 2px solid #a0522d;
        }
        .ui-modal-header {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #111827;
            text-align: center;
        }
        .ui-modal-form-group {
            margin-bottom: 1rem;
        }
        .ui-modal-form-group label {
            display: block;
            margin-bottom: 0.25rem;
            font-weight: 500;
            color: #374151;
            font-size: 1.1rem;
        }
        .ui-modal-form-group input[type="text"],
        .ui-modal-form-group input[type="number"],
        .ui-modal-form-group textarea {
             width: 100%;
             padding: 0.5rem;
             border: 1px solid #D1D5DB;
             border-radius: 0.25rem;
             font-size: 1rem;
        }
        .ui-modal-buttons {
             display: flex;
             gap: 1rem;
             justify-content: space-between;
             margin-top: 1.5rem;
        }
        .ui-modal-buttons button {
             flex: 1;
             padding: 0.75rem 1rem;
             border-radius: 0.25rem;
             font-size: 1.1rem;
             border: none;
             cursor: pointer;
        }
        .ui-modal-buttons .save-btn { background-color: #2563EB; color: white; }
        .ui-modal-buttons .cancel-btn { background-color: #D1D5DB; color: #111827; }
        .ui-modal-buttons .help-btn { background-color: #4A5568; color: white; }

        /* MODIFICADO: Estilos para la nueva tarjeta de progreso de navegación */
        .ui-progress-card {
            background: rgba(0, 0, 0, 0.6);
            padding: 10px;
            border-radius: 5px;
            color: white;
            max-width: 500px;
            margin: auto;
            font-family: 'Lato', sans-serif;
        }
        .ui-progress-card .top-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        .ui-progress-card .turn-icon {
            background-color: white;
            padding: 5px;
            border-radius: 4px;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .ui-progress-card .turn-icon svg {
            width: 24px;
            height: 24px;
            stroke: #333;
            stroke-width: 2;
        }
        .ui-progress-card .maneuver-text {
            flex-grow: 1;
            text-align: center;
            text-shadow: 1px 1px 2px black;
        }
        .ui-progress-card .maneuver-text strong {
             display: block;
             font-size: 1.1rem;
        }
        .ui-progress-card .distance { font-size: 1.4rem; font-weight: bold; }
        .ui-progress-card .progress-bar-container {
             width: 100%; height: 7px; background-color: #e0e0e0; border-radius: 4px; overflow: hidden; margin: 5px 0;
        }
        .ui-progress-card .progress-bar {
             height: 100%;
             background: linear-gradient(to right, #FA8072, #FF0000 30%, #680000 97%);
             width: 60%;
        }
        .ui-progress-card .route-progress-container {
             width: 100%; height: 18px; background-color: #e0e0e0; border-radius: 9px; margin: 15px 0;
             position: relative;
        }
        .ui-progress-card .route-progress-fill {
             height: 100%; background: linear-gradient(to right, #006854 35%, #2E8B58 90%, #023d54 96%);
             width: 45%; border-radius: 9px;
             position: relative;
        }
        .ui-progress-card .route-progress-text {
            position: absolute; top: 50%; left: 10px; transform: translateY(-50%); font-weight: bold; font-size: 0.8em;
            color: yellow; text-shadow: 1px 1px 1px #006400;
        }
        .ui-progress-card .eta-info {
             display: flex; justify-content: space-between; font-size: 0.9em;
        }
        .ui-progress-card .eta-info div { text-align: center; }
        .ui-progress-card .eta-info strong { display: block; font-size: 0.8em; }
        .ui-progress-card .eta-info .eta-deviation { color: #10B981; font-weight:bold; }
    </style>
</head>
<body>
    <div class="manual-container">
        <nav class="index-nav">
            <h2>
                <img src="https://boardinggate.github.io/Tesla/th.jpeg" alt="Logo">
                <span>Manual de Usuario</span>
            </h2>

            <!-- BOTÓN AÑADIDO AL COMIENZO DEL ÍNDICE -->
            <a href="https://boardinggate.github.io/Tesla/tesla.html" target="_blank" class="nav-exit-btn">SALIR DE LA AYUDA</a>

            <ul>
                <li><a href="#intro">Introducción</a></li>
                <li><a href="#interfaz-principal">Interfaz Principal</a>
                    <ul>
                        <li><a href="#rejilla-botones">Rejilla de Botones</a></li>
                        <li><a href="#controles-superiores">Controles Superiores</a></li>
                        <li><a href="#controles-laterales">Controles Laterales</a></li>
                        <li><a href="#pie-pagina">Pie de Página y Avisos</a></li>
                    </ul>
                </li>
                <li><a href="#recordatorios">Recordatorios y Tareas</a>
                    <ul>
                        <li><a href="#crear-recordatorio">Crear/Editar Recordatorio</a></li>
                        <li><a href="#avisos-recordatorios">Avisos de Recordatorios</a></li>
                        <li><a href="#tabla-recordatorios">Tabla de Recordatorios</a></li>
                    </ul>
                </li>
                 <li><a href="#personalizacion">Personalización</a>
                    <ul>
                        <li><a href="#modo-edicion">Modo Edición (URLs y Orden)</a></li>
                        <li><a href="#modo-asignacion">Modo Asignación (Secciones)</a></li>
                        <li><a href="#modo-keyword">Modo Palabra Clave (Filtro)</a></li>
                    </ul>
                </li>
                <li><a href="#navegacion">Navegación y Mapas</a>
                    <ul>
                        <li><a href="#abrir-mapa">Abrir el Mapa</a></li>
                        <li><a href="#planificar-ruta">Planificar una Ruta</a></li>
                        <li><a href="#controles-mapa">Controles del Mapa</a></li>
                        <li><a href="#modo-navegacion">Modo Navegación Activa</a></li>
                        <li><a href="#simulacion-ruta">Simulación de Ruta</a></li>
                    </ul>
                </li>
                <li><a href="#configuracion">Configuración y Datos</a>
                    <ul>
                        <li><a href="#config-usuario">Usuario y Firebase</a></li>
                        <li><a href="#config-pin">Clave de Acceso (PIN)</a></li>
                        <li><a href="#config-radares">Radares y POIs</a></li>
                        <li><a href="#config-backup">Backup / Restore</a></li>
                        <li><a href="#config-borrar">Borrar Datos</a></li>
                    </ul>
                </li>
                 <li><a href="#otras-funciones">Otras Funciones</a>
                    <ul>
                        <li><a href="#modo-oscuro">Modo Oscuro</a></li>
                        <li><a href="#zoom-grid">Zoom del Grid</a></li>
                        <li><a href="#historial-versiones">Historial de Versiones</a></li>
                    </ul>
                </li>
            </ul>
            
            <!-- BOTÓN AÑADIDO AL FINAL DEL ÍNDICE -->
            <a href="https://boardinggate.github.io/Tesla/tesla.html" target="_blank" class="nav-exit-btn">SALIR DE LA AYUDA</a>

        </nav>

        <main class="manual-content">
            <header>
                <h1><img src="https://boardinggate.github.io/Tesla/th.jpeg" alt="Icono App">BoardingGate Lanzador</h1>
            </header>

            <section id="intro">
                <h2>Introducción</h2>
                <p>Bienvenido al manual de usuario de <strong>BoardingGate Lanzador</strong>. Esta aplicación está diseñada para ser un centro de control personalizable y un potente asistente de navegación, todo accesible desde el navegador de tu vehículo o cualquier dispositivo.</p>
                <p>Aquí encontrarás desde accesos directos a tus webs favoritas hasta un completo sistema de recordatorios (con y sin geolocalización) y un planificador de rutas GPS avanzado. Este manual te guiará a través de todas sus funciones para que puedas sacarle el máximo partido.</p>
            </section>

            <section id="interfaz-principal">
                <h2>Interfaz Principal</h2>
                <p>La pantalla principal es tu centro de operaciones. Desde aquí puedes acceder a todas las funciones clave de la aplicación.</p>

                <div class="screenshot-container">
                    <h4>Vista General de la Pantalla Principal</h4>
                    <div class="ui-app-bg">
                        <!-- Recreación de controles superiores -->
                        <p style="text-align:center; font-weight:bold; margin-bottom:10px;">Controles Superiores</p>
                        <div class="ui-top-bar" style="justify-content:center;">
                            <span class="ui-button"><img src="https://boardinggate.github.io/Tesla/config.jpg" alt="Config"></span>
                            <span class="ui-button"><img src="https://boardinggate.github.io/Tesla/personal.png" alt="Personalizar"></span>
                            <span class="ui-button"><img src="RADAR.PNG" alt="Navegación"></span>
                            <span class="ui-button"><img src="https://boardinggate.github.io/Tesla/reload.webp" alt="Recargar"></span>
                            <span class="ui-button"><img src="https://boardinggate.github.io/Tesla/IMG_4314.PNG" alt="Keyword"></span>
                        </div>
                        
                        <div style="display: flex; gap: 20px;">
                            <!-- Recreación de controles laterales -->
                            <div class="ui-side-bar" style="flex-direction: column; flex-shrink: 0;">
                                 <div class="ui-side-button"><img src="https://boardinggate.github.io/Tesla/IMG_4192.jpg" alt="ON"></div>
                                 <div class="ui-side-button" style="font-size: 1.25rem; font-weight: bold; color: #000;">- PdR,s</div>
                                 <div class="ui-side-button" style="font-size: 1.25rem; font-weight: bold; color: #000;">- iAs</div>
                            </div>
                            
                            <!-- Recreación de la rejilla -->
                            <div class="ui-grid" style="flex-grow: 1;">
                                <div class="ui-bookmark">
                                    <img src="https://www.google.com/s2/favicons?domain=youtube.com&sz=64" alt="YT">
                                    <span class="ui-bookmark-name">YouTube</span>
                                </div>
                                 <div class="ui-bookmark">
                                    <img src="https://www.google.com/s2/favicons?domain=google.com&sz=64" alt="G">
                                    <span class="ui-bookmark-name">Google</span>
                                </div>
                                <div class="ui-bookmark">
                                    <img src="https://boardinggate.github.io/Tesla/IMG_4172.png" alt="Drive">
                                    <span class="ui-bookmark-name">GDrive</span>
                                </div>
                                 <div class="ui-bookmark">
                                    <img src="https://www.google.com/s2/favicons?domain=abetterrouteplanner.com&sz=64" alt="ABRP">
                                    <span class="ui-bookmark-name">ABRP</span>
                                </div>
                                <div class="ui-bookmark">
                                    <img src="https://www.google.com/s2/favicons?domain=electromaps.com&sz=64" alt="Electromaps">
                                    <span class="ui-bookmark-name">ElectroMaps</span>
                                </div>
                                <div class="ui-bookmark" style="border-style: dashed; color: #aaa; background-color: rgba(200,200,200,0.1);">
                                    <span style="font-size: 2rem;">+</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 id="rejilla-botones">La Rejilla de Botones</h3>
                <p>El área central de la aplicación es una rejilla de hasta 96 botones totalmente personalizables. Cada botón puede ser un enlace a una página web o una acción interna de la aplicación. Las casillas vacías se muestran con un signo `+` y están listas para ser configuradas.</p>
                <p>El color de fondo de los botones indica a qué sección de ocultación pertenecen (ver <a href="#controles-laterales">Controles Laterales</a>).</p>

                <h3 id="controles-superiores">Controles Superiores</h3>
                <p>Encima de la rejilla principal, encontrarás una barra de iconos con las funciones más importantes:</p>
                <ul>
                    <li><img src="https://boardinggate.github.io/Tesla/config.jpg" alt="Configuración" class="icon-inline"> <strong>Configuración:</strong> Abre la ventana de configuración general, donde puedes gestionar tus datos de usuario, backups, clave de acceso y más.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/personal.png" alt="Personalizar" class="icon-inline"> <strong>Personalizar:</strong> Activa los modos de edición para cambiar los botones de la rejilla.</li>
                    <li><img src="RADAR.PNG" alt="Navegación" class="icon-inline"> <strong>Navegación/Mapa:</strong> Abre la vista de mapa a pantalla completa para planificar rutas, navegar y ver la ubicación de tus recordatorios.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/home.webp" alt="Atrás" class="icon-inline"> <strong>Atrás:</strong> Funciona como el botón "Atrás" del navegador.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/reload.webp" alt="Recargar" class="icon-inline"> <strong>Recargar:</strong> Vuelve a cargar la página.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/IMG_4314.PNG" alt="Keyword" class="icon-inline"> <strong>Asignar Palabra Clave:</strong> Activa un modo especial para añadir palabras clave a los nombres de los botones, facilitando el filtrado.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/IMG_4280.png" alt="Clave" class="icon-inline"> <strong>Activar/Desactivar Clave:</strong> Si has configurado un PIN, este botón activa o desactiva la solicitud del PIN al entrar a la página.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/IMG_4309.PNG" alt="Versiones" class="icon-inline"> <strong>Versiones:</strong> Muestra el historial de cambios y recomendaciones de la aplicación. El icono se ilumina si hay una nueva versión no leída.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/IMG_4326.PNG" alt="Ayuda" class="icon-inline"> <strong>Ayuda:</strong> Abre este manual en una nueva pestaña.</li>
                </ul>

                <h3 id="controles-laterales">Controles Laterales</h3>
                <p>En el lado izquierdo de la pantalla hay una columna de botones fijos para un acceso rápido a controles de visualización y funciones comunes.</p>
                <div class="screenshot-container">
                    <h4>Botones Laterales</h4>
                    <div class="ui-side-bar" style="flex-direction: column; align-items: flex-start;">
                        <div class="ui-side-button"><img src="https://boardinggate.github.io/Tesla/IMG_4192.jpg" alt="ON"></div>
                        <div class="ui-side-button" style="font-size: 1.25rem; font-weight: bold; color: #000;">- PdR,s</div>
                        <div class="ui-side-button" style="font-size: 1.25rem; font-weight: bold; color: #000;">- iAs</div>
                        <div class="ui-side-button"><img src="https://boardinggate.github.io/Tesla/IMG_4197.jpg" alt="Recordatorios"></div>
                         <div class="ui-side-button"><img src="https://boardinggate.github.io/Tesla/claro2.png" alt="Modo Claro"></div>
                    </div>
                </div>
                <ul>
                    <li><img src="https://boardinggate.github.io/Tesla/IMG_4192.jpg" alt="ON" class="icon-inline rect"> <strong>Visibilidad General:</strong> Pulsación larga para apagar (ocultar) o encender (mostrar) toda la rejilla de botones.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/zoon+.png" alt="Zoom" class="icon-inline rect"> <strong>Zoom Grid:</strong> Alterna entre una vista de 6 columnas y una vista ampliada de 4 columnas para mejor legibilidad.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/claro2.png" alt="Modo Claro" class="icon-inline rect"> <strong>Modo Claro/Oscuro:</strong> Cambia entre el tema claro y oscuro de la interfaz.</li>
                    <li><img src="https://boardinggate.github.io/Tesla/IMG_4197.jpg" alt="Recordatorios" class="icon-inline rect"> <strong>Recordatorios:</strong>
                        <ul>
                            <li><strong>Pulsación corta:</strong> Abre el modal para crear un nuevo recordatorio.</li>
                            <li><strong>Pulsación larga (2 segundos):</strong> Abre la tabla con todos tus recordatorios guardados.</li>
                            <li>Un número en rojo indica la cantidad de recordatorios pendientes.</li>
                        </ul>
                    </li>
                    <li><strong>Botones de Sección (-/+):</strong> Estos botones (ej. `- PdR,s`) controlan la visibilidad de grupos de botones en la rejilla. El signo `-` indica que la sección está visible, y `+` que está oculta.</li>
                </ul>

                <h3 id="pie-pagina">Pie de Página y Avisos</h3>
                <p>En la parte inferior se encuentra el pie de página con el logo, la versión y enlaces de interés. Justo encima, hay una zona de avisos que muestra mensajes importantes de forma rotatoria. Puedes ocultar/mostrar tanto los avisos como el pie de página pulsando el icono <img src="https://boardinggate.github.io/Tesla/IMG_4194.jpg" alt="Toggle Avisos" class="icon-inline">.</p>
            </section>

            <section id="recordatorios">
                <h2>Recordatorios y Tareas</h2>
                <p>Una de las funciones más potentes del lanzador es su sistema de recordatorios, que pueden ser por tiempo, cíclicos, por ubicación o una combinación de ellos.</p>
                
                <h3 id="crear-recordatorio">Crear/Editar un Recordatorio</h3>
                <p>Para crear un recordatorio, pulsa brevemente el botón <img src="https://boardinggate.github.io/Tesla/IMG_4197.jpg" alt="Recordatorios" class="icon-inline rect"> en la barra lateral. Se abrirá la siguiente ventana:</p>

                <div class="screenshot-container">
                     <h4>Ventana de Creación de Recordatorios</h4>
                     <div class="ui-modal" style="max-width: 800px; margin: auto;">
                        <h2 class="ui-modal-header">NUEVO RECORDATORIO</h2>
                        <div class="ui-modal-buttons" style="justify-content:center;">
                             <button class="save-btn">Aceptar (25)</button>
                             <button class="cancel-btn">Cancelar</button>
                             <button class="help-btn">Ayuda</button>
                        </div>
                        <div class="ui-modal-form-group">
                            <label>Texto del Recordatorio (interpreta lenguaje natural)</label>
                            <textarea placeholder="Ej: LLAMAR A JUAN MAÑANA A LAS 5 DE LA TARDE"></textarea>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                             <div class="ui-modal-form-group">
                                <label>Hora (HH:MM)</label>
                                <input type="text" placeholder="17:00">
                             </div>
                             <div class="ui-modal-form-group">
                                <label>Fecha (DD/MM/AAAA)</label>
                                <input type="text" placeholder="15/08/2024">
                             </div>
                        </div>
                        <div class="ui-modal-form-group">
                            <label>Días de Repetición:</label>
                            <div style="display:flex; gap:10px; font-size:0.9rem;"><input type="checkbox">Lun <input type="checkbox">Mar <input type="checkbox" checked>Mié</div>
                        </div>
                        <div class="ui-modal-form-group">
                            <label>Ubicación:</label>
                            <div style="display:flex; align-items:center; gap:10px;"><input type="checkbox"> Activar <input type="number" value="450" style="width: 80px;"> Radio (m)</div>
                        </div>
                     </div>
                </div>
                
                <ul>
                    <li><strong>Texto principal:</strong> Es el corazón del recordatorio. Puedes escribir lenguaje natural como <code>"RECOGER PAQUETE MAÑANA A LAS 10"</code> y la aplicación intentará rellenar los campos de fecha y hora automáticamente.</li>
                    <li><strong>Parseo inteligente:</strong> Reconoce palabras como "hoy", "mañana", días de la semana, "cada X días", horas como "a las cinco y media", etc.</li>
                    <li><strong>Recordatorio por Ubicación:</strong> Marca la casilla "Ubicación" para que el aviso solo salte cuando estés cerca de un punto geográfico. Pulsa "Ampliar Mapa" para fijar la ubicación en un mapa interactivo.</li>
                    <li><strong>Tipos de Recordatorios:</strong>
                        <ul>
                            <li><strong>Simple:</strong> Se activa una sola vez.</li>
                            <li><strong>Diario:</strong> Se activa a una hora específica, todos los días a partir de la fecha indicada.</li>
                            <li><strong>Semanal:</strong> Se activa los días de la semana seleccionados a la hora indicada.</li>
                            <li><strong>Por Intervalo:</strong> Se repite cada X días a partir de la fecha y hora iniciales.</li>
                        </ul>
                    </li>
                    <li><strong>Guardado Automático:</strong> La ventana tiene una cuenta atrás. Si no interactúas, el recordatorio se guardará automáticamente al llegar a cero.</li>
                </ul>

                <h3 id="avisos-recordatorios">Avisos de Recordatorios</h3>
                <p>Cuando un recordatorio vence (y se cumplen las condiciones de ubicación, si las tiene), aparecerá una ventana de aviso:</p>

                 <div class="screenshot-container">
                     <h4>Ventana de Aviso</h4>
                     <div style="background-color: #FFFF99; border-radius: 1.5rem; border: 2px solid var(--app-bg); box-shadow: 0 6px 15px rgba(0,0,0,0.3); max-width: 550px; margin: auto; overflow:hidden;">
                        <div style="padding: 0.8rem 1.5rem; text-align:center; font-weight:bold; color: #0000FF; border-bottom: 1px solid var(--app-bg);">
                            <span>1 de 1 Recordatorios</span>
                        </div>
                        <div style="padding: 1.5rem;">
                            <p style="font-size: 1.6rem; font-weight: bold; color: #0000FF;"><b>LLAMAR A JUAN</b></p>
                            <p style="font-size: 1.15rem; font-weight: bold; color: #0000FF;">Hora: 17:00 (de la Tarde)</p>
                            <div class="ui-modal-buttons" style="flex-direction: column;">
                                <button class="ui-modal-buttons .save-btn" style="background-color:#EF4444; color:white;">Visto / Próximo</button>
                                <button class="ui-modal-buttons .cancel-btn" style="background-color:#F59E0B; color:white;">Posponer</button>
                                <button class="ui-modal-buttons .help-btn" style="background-color:#10B981; color:white;">Modificar</button>
                            </div>
                        </div>
                     </div>
                </div>

                <ul>
                    <li>Si hay varios avisos, puedes deslizar lateralmente para verlos todos.</li>
                    <li><strong>Visto / Próximo:</strong> Marca el aviso como visto. Si es un recordatorio cíclico, calcula y guarda la siguiente ocurrencia. Si es simple, lo borra.</li>
                    <li><strong>Posponer:</strong> Abre un menú para posponer el recordatorio por un periodo de tiempo (15 min, 1 hora, etc.).</li>
                    <li><strong>Modificar:</strong> Te lleva de nuevo a la pantalla de edición del recordatorio.</li>
                </ul>
                
                <h3 id="tabla-recordatorios">Tabla de Recordatorios</h3>
                <p>Una pulsación larga en el botón de recordatorios <img src="https://boardinggate.github.io/Tesla/IMG_4197.jpg" alt="Recordatorios" class="icon-inline rect"> abre una tabla con todos tus recordatorios, permitiéndote gestionarlos de forma masiva.</p>
                <p>Desde aquí puedes ver, modificar, posponer o eliminar cada uno de ellos, así como filtrar para ver los recordatorios excluidos (como los radares).</p>
            </section>
            
            <section id="personalizacion">
                <h2>Personalización</h2>
                <p>El lanzador es altamente personalizable. Pulsando el botón <img src="https://boardinggate.github.io/Tesla/personal.png" alt="Personalizar" class="icon-inline"> se accede a los distintos modos de edición.</p>

                <h3 id="modo-edicion">Modo Edición (URLs y Orden)</h3>
                <p>Al entrar en este modo (el botón de personalizar se vuelve amarillo), puedes:</p>
                <ul>
                    <li><strong>Editar un botón:</strong> Haz clic en cualquier botón de la rejilla para abrir una ventana y cambiar su <strong>Nombre</strong>, <strong>URL</strong> e <strong>Icono</strong>.</li>
                    <li><strong>Arrastrar y soltar:</strong> Mantén pulsado un botón y arrástralo a otra posición, incluso a una casilla vacía, para reordenar la rejilla a tu gusto.</li>
                    <li><strong>Editar secciones:</strong> Haz clic en los botones laterales de sección (ej. `- PdR,s`) para cambiar su etiqueta.</li>
                </ul>

                <h3 id="modo-asignacion">Modo Asignación (Secciones)</h3>
                <p>En este modo (el botón de personalizar se vuelve cian), puedes definir qué botones de la rejilla pertenecen a cada sección lateral:</p>
                <ol>
                    <li>Haz clic en un botón de sección lateral (ej. `- iAs`). Se resaltará.</li>
                    <li>Ahora, haz clic en los botones de la rejilla que quieras asignar o desasignar de esa sección. Los botones asignados se verán resaltados.</li>
                    <li>Repite el proceso con otros botones de sección si lo deseas.</li>
                </ol>
                <p>Los cambios se guardan automáticamente al salir de este modo.</p>
                
                 <h3 id="modo-keyword">Modo Palabra Clave (Filtro)</h3>
                <p>Este modo (activado con el icono de llave <img src="https://boardinggate.github.io/Tesla/IMG_4314.PNG" alt="Keyword" class="icon-inline">) te permite añadir "etiquetas" a los nombres de los botones para un filtrado más potente.</p>
                <ol>
                    <li>Escribe una o varias palabras en el campo de filtro <input type="text" value="TESLA" disabled style="width:100px; text-align:center;">.</li>
                    <li>Activa el modo pulsando el icono de la llave <img src="https://boardinggate.github.io/Tesla/IMG_4314.PNG" alt="Keyword" class="icon-inline">.</li>
                    <li>Haz clic en cualquier botón de la rejilla. La palabra clave del filtro se añadirá (o quitará si ya existía) al final del nombre del botón. Ejemplo: "YouTube" pasaría a ser "YouTube [TESLA]".</li>
                </ol>
                <p>Esto permite filtrar rápidamente por esas palabras clave en el futuro.</p>
            </section>
            
            <section id="navegacion">
                <h2>Navegación y Mapas</h2>
                <p>Pulsando el icono del radar <img src="RADAR.PNG" alt="Navegación" class="icon-inline"> se accede a la vista de mapa, un completo sistema de navegación y visualización de ubicaciones.</p>

                <!-- MODIFICADO: Nueva captura de pantalla -->
                <div class="screenshot-container">
                    <h4>Interfaz de Navegación Activa</h4>
                    <div class="ui-progress-card">
                        <div class="top-info">
                            <div class="turn-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="15 14 20 9 15 4"></polyline><path d="M4 20v-7a4 4 0 0 1 4-4h12"></path>
                                </svg>
                            </div>
                            <div class="maneuver-text">
                                <span>Gira a la derecha en <strong>Calle Principal</strong></span>
                                <div class="distance">250 m</div>
                            </div>
                        </div>
                        <div class="progress-bar-container"><div class="progress-bar"></div></div>
                        <hr style="opacity: 0.3; margin: 10px 0;">
                        <div class="route-progress-container">
                            <div class="route-progress-fill">
                                <span class="route-progress-text">15.2 km (09:30 • 00:18)</span>
                            </div>
                        </div>
                        <div class="eta-info">
                            <div>
                                <strong>Próxima Etapa</strong>
                                <span>10.5 km | 00:12 | ETA: 10:42 <span class="eta-deviation">[-00:01]</span></span>
                            </div>
                            <div>
                                <strong>Final</strong>
                                <span>45.1 km | 00:45 | ETA: 11:15 <span class="eta-deviation">[-00:03]</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <h3 id="abrir-mapa">Abrir el Mapa</h3>
                <p>Al abrir el mapa, verás tu ubicación actual (si se conceden los permisos) y la de todos tus recordatorios que tengan una ubicación asignada. Las chinchetas verdes son recordatorios normales y las moradas son radares u otros POIs excluidos de la lista principal.</p>

                <h3 id="planificar-ruta">Planificar una Ruta</h3>
                <ul>
                    <li><strong>Añadir puntos:</strong> Simplemente pulsa en el mapa para añadir un punto de ruta. El primer punto será la salida (S), el último el destino (F) y los intermedios serán etapas numeradas.</li>
                    <li><strong>Buscar dirección:</strong> Usa el campo de búsqueda en la parte superior para encontrar un lugar por su nombre o dirección y añadirlo a la ruta.</li>
                    <li><strong>Reordenar/Eliminar:</strong> Puedes reordenar las etapas con el botón <img src="MOVER.PNG" alt="Ordenar" class="icon-inline rect"> o eliminar un punto pulsando la 'X' roja sobre su marcador en el mapa.</li>
                </ul>

                <h3 id="controles-mapa">Controles del Mapa</h3>
                <p>La barra superior del mapa contiene todos los controles necesarios:</p>
                <ul>
                    <li><img src="ESTASAQUI.PNG" alt="Estás Aquí" class="icon-inline rect"> <strong>Seguimiento:</strong> Centra el mapa en tu posición y lo orienta en la dirección de la marcha.</li>
                    <li><img src="ZOOM+.PNG" alt="Zoom" class="icon-inline rect"> <strong>Zoom:</strong> Alterna la vista entre la ruta completa y un zoom cercano a tu vehículo.</li>
                    <li><img src="INICIARNAVEGACION.PNG" alt="Iniciar Navegación" class="icon-inline rect"> <strong>Iniciar/Terminar Navegación:</strong> Comienza o detiene el modo de seguimiento activo de la ruta.</li>
                    <li><img src="GUARDARRUTA.PNG" alt="Guardar Ruta" class="icon-inline rect"> <strong>Guardar Ruta:</strong> Guarda la ruta actual para poder cargarla más tarde.</li>
                    <li><img src="CARGARRUTA.PNG" alt="Cargar Ruta" class="icon-inline rect"> <strong>Cargar Ruta:</strong> Muestra una lista de tus rutas guardadas.</li>
                    <li><img src="BORRARRUTA.PNG" alt="Borrar Ruta" class="icon-inline rect"> <strong>Borrar Ruta:</strong> Limpia la ruta actual del mapa.</li>
                </ul>

                <h3 id="modo-navegacion">Modo Navegación Activa</h3>
                <p>Una vez iniciada la navegación, la interfaz se simplifica para centrarse en la conducción:</p>
                <ul>
                    <li><strong>Panel de Indicaciones:</strong> En la parte inferior izquierda, verás la próxima maniobra, la distancia a ella, el progreso total de la ruta y la información de ETA (Hora Estimada de Llegada) para la próxima etapa y el destino final.</li>
                    <li><strong>Panel de Orientación:</strong> Abajo a la izquierda, la brújula muestra tu rumbo, altitud y velocidad actual. También contiene una gráfica configurable para visualizar la desviación de la ETA o el perfil de altitud de la ruta.</li>
                    <li><strong>Alertas en Ruta:</strong> Si activas las casillas "Radares Ruta" o "Tareas Ruta", los radares y recordatorios que se encuentren en tu trayecto aparecerán en la barra de progreso y generarán alertas de proximidad.</li>
                </ul>
                
                <h3 id="simulacion-ruta">Simulación de Ruta</h3>
                <p>Puedes simular una ruta de dos maneras con el botón <img src="GPS.PNG" alt="Simulación GPS" class="icon-inline rect">:</p>
                <ol>
                    <li><strong>Recorrido automático:</strong> Si hay una ruta calculada, te pedirá una velocidad y simulará el viaje completo.</li>
                    <li><strong>Clic manual:</strong> Si no hay ruta, puedes pulsar en cualquier punto del mapa para "teletransportar" tu ubicación GPS a ese punto, útil para probar recordatorios por ubicación.</li>
                </ol>
            </section>
            
            <section id="configuracion">
                 <h2>Configuración y Datos</h2>
                 <p>La ventana de configuración, accesible desde el botón <img src="https://boardinggate.github.io/Tesla/config.jpg" alt="Configuración" class="icon-inline">, es el centro para gestionar tus datos y preferencias.</p>

                <div class="screenshot-container">
                    <h4>Ventana de Configuración</h4>
                     <div class="ui-modal" style="border:none; background-color:#ECEFE8; max-width: 800px; margin: auto;">
                        <h2 class="ui-modal-header" style="font-size: 1.6rem; color: #2F4F4F;">Configuración y Datos</h2>
                        <div style="display:flex; border-bottom: 1px solid #ccc; margin-bottom: -1px;">
                            <button style="padding: .7rem 1.2rem; cursor: pointer; border: 1px solid #ccc; border-bottom: 1px solid #ECEFE8; background-color: #ECEFE8; font-weight: bold; color: #2F4F4F;">Usuario</button>
                            <button style="padding: .7rem 1.2rem; cursor: pointer; border: 1px solid #ccc; border-bottom: none; background-color: #e0e0d0; color:#555">Clave Acceso</button>
                            <button style="padding: .7rem 1.2rem; cursor: pointer; border: 1px solid #ccc; border-bottom: none; background-color: #e0e0d0; color:#555">RADARES</button>
                        </div>
                        <div style="border:1px solid #ccc; border-top:none; padding: 1.8rem;">
                             <h3 style="font-size: 1.3rem; margin-bottom: .8rem; color: #4682B4;">Datos de Usuario y Backup en Firebase</h3>
                             <div class="ui-modal-form-group">
                                <label for="user-id-demo">* ID Usuario (Único):</label>
                                <input type="text" id="user-id-demo" value="BoardingGate">
                             </div>
                             <button style="background-color: #16A34A; color: white; padding: .6rem 1rem; width:100%; border-radius:4px;">Validar y Guardar en Firebase</button>
                        </div>
                     </div>
                </div>

                 <h3 id="config-usuario">Usuario y Firebase</h3>
                 <p>Esta es la pestaña más importante para asegurar tus datos. Al proporcionar un <strong>ID de Usuario</strong> único y un <strong>PIN de 6 cifras</strong> (que se te pedirá), puedes guardar una copia de seguridad de TODA tu configuración (botones, recordatorios, etc.) en la nube de Firebase. Esto te permite restaurar tu configuración en cualquier dispositivo o si borras la caché del navegador.</p>
                 <p>También puedes activar el <strong>backup automático</strong> al cargar la página para mantener tus datos siempre seguros.</p>

                 <h3 id="config-pin">Clave de Acceso (PIN)</h3>
                 <p>Aquí puedes establecer un <strong>PIN de 4 cifras</strong> para proteger el acceso a la aplicación. Este PIN es local y se guarda únicamente en el navegador actual. También puedes configurar la app para que salte directamente al mapa de navegación al iniciar.</p>

                 <h3 id="config-radares">Radares y POIs</h3>
                 <p>Esta sección te permite importar Puntos de Interés (POIs), como radares, desde archivos KML. Puedes filtrar por coordenadas o palabras clave en el nombre del POI (ej. `FIJO`, `CAMUFLADO`, `MADRID`). Los POIs importados se crean como recordatorios de ubicación con un radio de 400m y se marcan como "excluidos de la lista" por defecto.</p>
                 <p>Desde aquí también puedes borrar masivamente los recordatorios de este tipo, usando los mismos filtros.</p>

                 <h3 id="config-backup">Backup / Restore</h3>
                 <p>Esta pestaña ofrece dos métodos:</p>
                 <ol>
                    <li><strong>Desde Firebase:</strong> Introduce el ID de Usuario que usaste para guardar y pulsa "Recuperar". Se te pedirá el PIN de 6 cifras que estableciste para ese backup.</li>
                    <li><strong>Local (Manual):</strong> Genera un código de texto que puedes copiar y guardar en un lugar seguro. Para restaurar, simplemente pega ese código y pulsa "Restaurar".</li>
                 </ol>
                 
                 <h3 id="config-borrar">Borrar Datos</h3>
                 <p>¡Usa esta sección con cuidado!</p>
                 <ul>
                     <li><strong>Restaurar Grid Original:</strong> Devuelve la rejilla de botones a su estado por defecto, eliminando toda tu personalización de botones.</li>
                     <li><strong>Borrar TODO:</strong> Elimina <strong>absolutamente todos</strong> los datos guardados en el navegador (configuración, recordatorios, PIN, etc.). Es una acción irreversible.</li>
                 </ul>
            </section>
            
            <section id="otras-funciones">
                <h2>Otras Funciones</h2>

                <h3 id="modo-oscuro">Modo Oscuro</h3>
                <p>Pulsa el botón <img src="https://boardinggate.github.io/Tesla/oscuro2.png" alt="Modo oscuro" class="icon-inline rect"> en la barra lateral para alternar entre el tema claro y el oscuro, adaptando la interfaz a las condiciones de luz.</p>

                <h3 id="zoom-grid">Zoom del Grid</h3>
                <p>Si los botones de la rejilla te parecen pequeños, usa el botón de zoom <img src="https://boardinggate.github.io/Tesla/zoon-.png" alt="Zoom" class="icon-inline rect"> para cambiar a una vista de 4 columnas con iconos y texto más grandes.</p>

                <h3 id="historial-versiones">Historial de Versiones</h3>
                <p>Para estar al día de las últimas novedades y correcciones, pulsa el botón de versiones <img src="https://boardinggate.github.io/Tesla/IMG_4309.PNG" alt="Versiones" class="icon-inline">. Se abrirá una ventana con el registro de cambios. El icono se iluminará si hay una actualización que aún no has visto.</p>
            </section>

        </main>
    </div>
</body>
</html>
